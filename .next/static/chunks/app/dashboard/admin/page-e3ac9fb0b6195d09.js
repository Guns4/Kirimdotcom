(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[833],{1920:(e,a,s)=>{"use strict";s.d(a,{DashboardLayout:()=>x});var t=s(5155),i=s(2619),r=s.n(i),l=s(63),n=s(4486),o=s(5269),d=s(9384),c=s(4485),m=s(5870),h=s(7910),u=s(8854),g=s(4926);function x(e){let{children:a,user:s,profile:i}=e,x=(0,l.usePathname)(),p=(0,l.useRouter)(),b=(0,o.U)(),f=async()=>{await b.auth.signOut(),p.push("/"),p.refresh()},j=[{href:"/dashboard",label:"Overview",icon:d.A,exact:!0},{href:"/dashboard/history",label:"Riwayat",icon:c.A},{href:"/dashboard/settings",label:"Pengaturan",icon:m.A}];return(null==i?void 0:i.role)==="admin"&&j.push({href:"/dashboard/admin",label:"Admin Panel",icon:h.A}),(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-indigo-950 to-purple-900",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)(n.P.aside,{initial:{x:-300},animate:{x:0},className:"w-64 min-h-screen bg-gray-900/50 backdrop-blur-xl border-r border-white/10 p-6",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg",children:s.email.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-white font-semibold truncate",children:s.email}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-400 capitalize",children:(null==i?void 0:i.role)||"user"}),(null==i?void 0:i.subscription_status)==="active"&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-xs font-bold rounded-full",children:[(0,t.jsx)(u.A,{className:"w-3 h-3"}),"PRO"]})]})]})]})}),(0,t.jsx)("nav",{className:"space-y-2",children:j.map(e=>{let a=e.icon,s=e.exact?x===e.href:x.startsWith(e.href);return(0,t.jsxs)(r(),{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all ".concat(s?"bg-indigo-600 text-white":"text-gray-400 hover:bg-white/5 hover:text-white"),children:[(0,t.jsx)(a,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-medium",children:e.label})]},e.href)})}),(0,t.jsxs)("button",{onClick:f,className:"w-full mt-8 flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-500/10 transition-all",children:[(0,t.jsx)(g.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Keluar"})]})]}),(0,t.jsx)("main",{className:"flex-1 p-8",children:(0,t.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:a})})]})})}},2726:(e,a,s)=>{Promise.resolve().then(s.bind(s,8998)),Promise.resolve().then(s.bind(s,1920))},5269:(e,a,s)=>{"use strict";s.d(a,{U:()=>i});var t=s(5417);function i(){return(0,t.createBrowserClient)("https://onkmywglrpjqulhephkf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ua215d2dscnBqcXVsaGVwaGtmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY1NzI4NDIsImV4cCI6MjA4MjE0ODg0Mn0.GX8yHhJc6kItn9ikRfsRoVlP9KGar8V_f9SYd2M4mX8")}},8998:(e,a,s)=>{"use strict";s.d(a,{LogoUploader:()=>p});var t=s(5155),i=s(2115),r=s(5269),l=s(4486),n=s(5299),o=s(5917),d=s(1786),c=s(5229),m=s(5959),h=s(9863);let u={settings:null,isLoading:!0,error:null},g=(0,m.v)()((0,h.lt)((0,h.Zr)(e=>({...u,setSettings:a=>e({settings:a,isLoading:!1,error:null}),updateSettings:a=>e(e=>({settings:e.settings?{...e.settings,...a}:null})),setLoading:a=>e({isLoading:a}),setError:a=>e({error:a,isLoading:!1}),reset:()=>e(u)}),{name:"site-settings-storage",partialize:e=>({settings:e.settings})}),{name:"SiteSettingsStore"}));var x=s(5239);function p(e){let{currentLogoUrl:a}=e,[s,m]=(0,i.useState)(!1),[h,u]=(0,i.useState)(""),[p,b]=(0,i.useState)(!1),f=(0,r.U)(),{updateSettings:j}=g(),N=async e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(t){if(!t.type.startsWith("image/"))return void u("File harus berupa gambar");if(t.size>2097152)return void u("Ukuran file maksimal 2MB");m(!0),u(""),b(!1);try{let e=t.name.split(".").pop(),s="logo-".concat(Date.now(),".").concat(e),i="logos/".concat(s),{data:r,error:l}=await f.storage.from("assets").upload(i,t,{cacheControl:"3600",upsert:!1});if(l)throw l;let{data:{publicUrl:n}}=f.storage.from("assets").getPublicUrl(i),{error:o}=await f.from("site_settings").update({logo_url:n}).limit(1);if(o)throw o;if(j({logo_url:n}),b(!0),setTimeout(()=>b(!1),3e3),a&&a.includes("supabase")){let e=a.split("/").pop();e&&await f.storage.from("assets").remove(["logos/".concat(e)])}}catch(e){console.error("Upload error:",e),u(e.message||"Gagal upload logo")}finally{m(!1)}}};return(0,t.jsxs)("div",{className:"space-y-4",children:[a&&(0,t.jsxs)("div",{className:"p-4 bg-white/5 rounded-xl border border-white/10",children:[(0,t.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Logo Saat Ini:"}),(0,t.jsx)("div",{className:"relative w-32 h-32 bg-white/10 rounded-lg overflow-hidden",children:(0,t.jsx)(x.default,{src:a,alt:"Current Logo",fill:!0,className:"object-contain"})})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:N,disabled:s,className:"hidden"}),(0,t.jsx)("label",{htmlFor:"logo-upload",className:"block w-full p-6 border-2 border-dashed rounded-xl transition-all cursor-pointer ".concat(s?"border-gray-600 bg-gray-800/50 cursor-not-allowed":"border-indigo-500/50 hover:border-indigo-500 hover:bg-indigo-500/10"),children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[s?(0,t.jsx)(n.A,{className:"w-10 h-10 text-indigo-400 animate-spin"}):p?(0,t.jsx)(o.A,{className:"w-10 h-10 text-green-400"}):(0,t.jsx)(d.A,{className:"w-10 h-10 text-indigo-400"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-white font-medium",children:s?"Mengupload...":p?"Upload Berhasil!":"Click untuk upload logo baru"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"PNG, JPG, or SVG (max 2MB)"})]})]})})]}),h&&(0,t.jsxs)(l.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-4 bg-red-500/10 border border-red-500/50 rounded-lg flex items-center gap-3 text-red-400",children:[(0,t.jsx)(c.A,{className:"w-5 h-5"}),(0,t.jsx)("p",{className:"text-sm",children:h})]}),p&&(0,t.jsxs)(l.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-4 bg-green-500/10 border border-green-500/50 rounded-lg flex items-center gap-3 text-green-400",children:[(0,t.jsx)(o.A,{className:"w-5 h-5"}),(0,t.jsx)("p",{className:"text-sm",children:"Logo berhasil diupdate! Refresh halaman untuk melihat perubahan."})]})]})}}},e=>{e.O(0,[584,619,92,721,441,255,358],()=>e(e.s=2726)),_N_E=e.O()}]);